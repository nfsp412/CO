# 课后习题

## 1.2.6

1D 2A 3B 4D 5D 6A 7C 8A !9B/D !10D/C !11A/C 12B 13C 14C 15D 16D 17B !18B/C 19B !20C 21A !22C 23C 24A

## 1.3.3

1D 2B 3C !4C !5D 6B !7A/C 8D 9C !10C/B 11A !12D/A !13D/B !14A/D !15C 16B !17B/D !18A/D !19A/D !20C/D !21C !22D !23D 24D 25D 26C 27D 28C !29B !30B/D !31C/A 32C

## 2.1.5

1B 2B 3D 4B 5B 6D !7D/C 8D 9D !10A 11C 12B 13C !14B/C !15B/D 16B 17C 18A 19D 20B 21D 22C !23B !24D/A 25D !26D 27B 28B 29B 30D 31D 32A 33D 34B

## 2.2.5

!1B 2D 3C 4B 5D 6D 7C 8C !9C 10A 11C !12A/B 13B 14D !15B/C 16B !17A !18D/B !19C 20D 21B 22A 23C 24A !25A 26D 27B 28A 29C 30C 31B 32A 33B !34B !35D

大题
1.
A -9 -1001
B -5 -0101
A 1000 1001
B 1000 0101
A
1111 0111
B
1111 1011
A+B
1111 0010
OF=1异或1=0
无溢出
-B
0000 0101
A-B
1111 1100
OF=0异或0=0
无溢出

3
(1)
x 1100 0100
A 1011 1100 BCH
y 1101 0000
B 1011 0000 B0H
(2)
x+y
0110 1100 6CH
OF=1异或0=1
溢出
SF=0
(3)
-y
0101 0000 50H
x-y
0000 1100 0CH
OF=1异或1=0
不溢出
SF=0

## 3.1.4

!1C/D 2C !3B !4C/D 5A 6C 7B 8B 9D 10D 11D !12D 13A !14B

## 3.2.5

1C 2C 3B !4D/B 5B 6C 7A 8A 9D 10B 11A 12C 13C 14B !15B/C !16A 17D !18C !19A/B !20B 21D 22B !23C !24D !25A !26B !27A 28A 29A !30C/A 31B !32D !33C !34C !35C

大题
5.
00            01        10         11
DRAM0         DRAM1     DRAM2      DRAM3
                        10(2)      11(3)
100(4)                  1010(10)
1000(8)       101(9)
              1101(13)
              10001(17)
              100101(37)
              101001(41)           110011(51)
                                   1000011(67)

## 3.3.5

1D 2A 3D 4A 5C !6D !7D/A !8C !9D !10B !11D 12D !13A/D !14C/D !15D/C 16C 17C

## 3.4.3

1B 2A 3D 4C 5B 6D 7C !8D 9B 10B 11B 12C

## 3.5.6

!1A/B !2D/C 3C 4D 5A 6C 7B 8A !9C/D !10 11A 12A 13C !14D !15C !16A 17C !18 !19B !20B !21D 22A !23C !24A 25C !26D !27A 28D 29C !30 !31C 32A !33A !34A

14
4096*64=2^6*2^12=2^18
行号6位
tag位18-6=12位
有效位1位
地址映射表=12+1 * 64

15
块内地址2^4
128*2^10/16=2^7*2^10/2^4=2^13
2^13/8=2^10
组号位数10
00 0100 1000 1101
048DH

16
块内地址8*32bit=2^3*2^5=2^8
2^8/8=2^5B=32字节
5位
行号2^4*2^10/2^5=2^9
9位
0011 0101 0011 0000 0001
0011 01  01 0011 000  0 0001
0 1001 1000
8+16+128=152

19
Cache总量不变 块大小增加一倍 块内地址位数增加1位
块数量减少一倍
n路不变
组数量减少一倍
组位数减少1位
主存总量不变 主存位数不变
tag=主存位数-组位数-块内地址位数 不变

20
块内地址16=2^4
4位
行号16=2^4
4位
组号16/2=8=2^3
3位
0011 0000 48号 行号0011 组号011 冲突
308号 1 0011 0100 行号0011 组号011 冲突
或者
48/16B=3 3%16=3
308/16B=19 19%16=3
3%8=3
19%8=3

21
块内地址32bit=4B=2^2
2位
tag 32-2=30位
脏位 1
有效位 1
数据位32
共计64
32*64*K=2^5*2^6=2^11*K

23
1+8+1=10时钟周期
默认窄型结构
缺失损失=64/8*10=80时钟周期

24
1+8+1=10时钟周期
多模块交叉存储
支持突发传送
10+(8-1)*1=17

27
块内地址 512=2^9 9位
组号 8K/512/2=2^3*2^10/2^9/2=2^3 3位
主存地址 1M=2^20 20位
tag=20-9-3=8位

31
访问a[0]时先读再写 读未命中写命中
读未命中,将a[0]到a[3]写入Cache
后序访问a[1],a[2],a[3]时,读命中,写命中
所以8次中有1次未命中
Cache缺失率1/8=12.5%

33
块内地址 32B=2^5 5位
回写 脏位1
直接映射无替换算法位
32KB/32B=1K=2^10 10位
主存地址32
tag=32-10-5=17位
有效位1
数据位根据主存块大小来计算 32B=32*8位
Cache位数=数据位32*8+tag17+有效位1+脏位1=275位

34
8路 8个
块内地址 64B=2^6B 6位
组号 32KB/64B/8=0.5K/8=0.5*2^10/8=2^9/2^3=2^6 6位
主存地址 32位
tag=32-6-6=20位

## 4.1.6

1D !2A 3A 4A 5D !6D/C 7C 8C !9A/B !10B 11B 12B 13C !14C/D !15A !16B !17D

14
二地址 12*2=24位
操作码 32-24=8位
2^8=256条
256-250=6
6*2^12=3*2^13

15
29*2^{3*6}+107*2^{2*6}<=2^n
2^{4+18}+2^{6+12}<=2^n
2^22+2^18<=2^n
n>=22
n=24
6 6 6 6
2^6=64>29
(64-29)*2^6=35*2^6>107
24位
或者
2^5=32>29 至少
即操作数位至少5
剩余32-29=3
二地址3*2^6=3*64=192
指令字长最少5+6+6+6=23
凑整24位

17
操作码4位
2^4=16
二地址12
一地址4*2^6=4*64=256
零地址2*2^6=2*64=128

大题
2
(1)
固定
操作码16-6-6=4位
2^4=16种
16-M-N
(2)
2^4-1=15
(3)
二地址2^4种 最多
一地址(2^4-P)*2^6
零地址((2^4-P)*2^6-X)*2^6=Q
X=(2^4-P)*2^6-Q/2^6

## 4.2.3

!1D/B 2A 3D !4C/B 5B 6A !7D/B 8B 9B 10D 11C 12C !13B !14D/C 15D !16B/C 17A !18B 19D !20B/A !21DC !22A/D 23D !24C 25C 26A 27C 28D 29A !30C 31D 32B !33A/D 34A 35A

13
R2是寄存器,寄存器间接寻址,R2是1234H,主存地址1234H的值是56H
取出数据长度根据R1位数,16位,取出16位数据
小端存储,7856H

14
按字编址 2B是一个字
PC+1 指的是加一条指令的长度,这里就是加一个字
4000H
操作码8位+偏移量8位
4000H+06H=4006H
PC+1
4006H+2=4008H

15
操作码+寻址特征位X+形式地址D
0000 00 + 00 + 0000 0000
2222H
0010 00 + 10 + 0010 0010
X=10 X2变址寻址
(X2)=1188H
(X2)+D=
0001 0001 1000 1000
0000 0000 0010 0010
0001 0001 1010 1010
11AAH

16
取指令 取指令后PC会加一,这里是加2 2000H+2=2002H
指令执行 2002H加40H
把40H理解为补码,看符号位0,符号扩展,高位补0
所以是2002H+0040H=2042H

17
存储字长=指令字长=16位
97 < 2^7=128
操作码 7位
寻址方式6 < 2^3=8 3位
形式地址位 16-7-3=6位
2^6=64 包含正负

20
注意,题目问的是操作数的地址,所以是1200H,如果问的操作数12FCH

21
小端存储
取出3B指令后 PC=243十进制
243+x=290
x=47
将47转换成十六进制补码
0010 1111 原码/补码/正数
符号扩展
0000 0000 0010 1111
002FH
小端存储
2F00H
243到200,-43
1 10 1011 原码
1 01 0101 补码
符号扩展
1111 1111 1 1 01 0101
FFD5H
小端存储
D5FFH

22
大端存储 4B 32位
AB CD 00 FF
LSB 求FF的地址 只需要求出AB地址再加3
做法1
C000 0000H 基址
FF00H 形式地址
符号位扩展
FFFF FF00H
相加
BFFF FF00
再加3
BFFF FF03H
问题在于 C000 0000H应该理解为无符号数,而形式地址FF00H是补码,这两个相加?
虽然说结果是正确的,但是是有严格数学证明的,
做题时,可以直接相加
做法2
1100 0000 0000 0000 0000 0000 0000 0000 基址
1111 1111 0000 0000 形式地址
1000 0001 0000 0000 原码 形式地址
真值 -100H
基址和真值求和
 C000 0000H  
-0000 0100H
=BFFF FF00H

24
bgt指令
大于0时 代表跳转条件成立
PC=PC+2代表一个指令占了两个编址单元,又因为占用了两个字节,所以按照字节编址
题目中的立即数实际上代表了指令的偏移量 而且该立即数使用8位补码表示
所以是-128到127范围
无符号数a-b大于0,则ZF=0,CF是0,即ZF+CF=0
有符号数a-b大于0,则ZF=0,SF是正数0,OF无溢出0
如果a-b大于0,但是溢出了,则ZF=0,OF=1,SF=1

25
2000H+2+06H=2008H

27
指的是当a>b时,跳转
ZF=0且CF=0

28
变址 1000H+2000H=3000H 4000H

29
操作码8位 剩余24位地址位
寄存器直接寻址 16=2^4 4位
基址寻址 16=2^4 4位
形式地址位 24-4-4=16位
2^16=65536 包含正负

30
先变址得到操作数地址 (I)+D
再间址得到操作数地址 ((I)+D)

32
增长100H
16^2=2^8
sizeof(double) 64位 8B
2^8/8B=2^8/2^3=2^5=32

33
大端存储,和直觉相同
按字节编址
机器数
x   x+1 x+2 x+3
12  34  FF  00
只要求出x地址,再加3,就能得到LSB地址
基址地址
F000 0000H
形式地址
FF12H
FFFF FF12H 补符号位
EFFF FF12H 相加结果
再加3
EFFF FF15H
方式2 转换成真值计算
FF12H形式地址转换成真值
1111 1111 0001 0010 补码
1000 0000 1110 1110 真值
-EEH
求和,即F000 0000H加上-EEH,即无符号数减法
这里做减法,就不转换成二进制再做减法,直接按照十进制减法的方式去做就行
        F000 0000H
减             EEH
等      EFFF FF12H
再加上3等于
EFFF FF15H

34
48 < 2^6=64 6位 操作码
4 < 2^2 2位 寻址方式
操作数位 16-6-2=8位
2^8=256

大题
!1
错误:
一地址指令 2^8-1
零地址指令 2^8
这里不是考虑一地址还是零地址,是直接看OP位数
2^5
寻址范围
直接寻址 EA=A   2^8
间接寻址 EA=(A) 2^16
变址寻址 EA=(Rx)+A  2^16
相对寻址 EA=(PC)+A  2^8 这里PC的值是没有办法手动更改的,所以范围只能根据A的范围来看

2
直接寻址 800
立即寻址 500
间接寻址 300
相对寻址 (PC)+A+2=325 这里要加上2
变址寻址 (XR)+A=900
寄存器R1寻址 400
寄存器R1间接寻址 700

3
4420H转换二进制
0100 0100 0010 0000
X=00直接寻址
有效地址0020H

2244H转换二进制
0010 0010 0100 0100
X=10 X2进行变址寻址 (X2)+D=1122H+44H=1166H

1322H转换二进制
0001 0011 0010 0010
X=11 相对寻址 (PC)+D+1=1234H+22H+1=1257H 这里记得PC+1

3521H转换二进制
0011 0101 0010 0001
X=01 X1进行变址寻址 (X1)+D=0037H+21H=0058H

6723H转换二进制
0110 0111 0010 0011
X=11 相对寻址 (PC)+D+1=1234H+23H+1=1258H 这里记得PC+1

5
立即寻址 无地址 AC=300
直接寻址 EA=A=300 AC=400
间接寻址 EA=(A)=400 AC=700
相对寻址 EA=(PC)+A+2=200+300+2=502 AC=900
变址寻址 EA=(IX)+A=100+300=400 AC=700
基址寻址 EA=(IR)+A=200+300=500 AC=600
先变址后间址 EA=((IX)+A)=700 AC=401
先间址后变址 EA=(IX)+(A)=100+400=500 AC=600

## 4.3.5

1C 2B 3C 4A 5C !6B/D 7C 8C 9D 10D !11C/D !12C

1
FFE8H 加上
7FE6H
存入ax寄存器

OF 看Cn异或Cn-1 1为溢出0为不溢出
SF 看Sn,1为负0为正
ZF 看是否为0,1为00不为0,这个可以从结果直观判断
CF 看Cn异或C0,1为溢出0为不溢出

1111 1111 1110 1000 加上
0111 1111 1110 0110
1 0111 1111 1100 1110 7FCEH
Cn-1=1 Cn=1 Cn异或Cn-1=0 OF=0
ZF=0
SF=0
Cn=1 C0=0 Cn异或C0=1 CF=1

2
FFE8H 减去
7FE6H
存入bx寄存器
1111 1111 1110 1000 bx -
0111 1111 1110 0110 ax
先根据ax值求出-ax值:全部位取反末尾+1
1000 0000 0001 1010
做加法
1111 1111 1110 1000 bx +
1000 0000 0001 1010 -ax
1 1000 0000 0000 0010 8002H

ZF=0
看Sn=1 所以SF=1
Cn=1 Cn-1=1 C0=1
Cn异或Cn-1=0 OF=0
Cn异或C0=0 CF=0

3
imm=-3
1000 0011
1111 1101 补码 FFFDH
小端存储,即低字节放在低位
低字节FD
高字节FF
2DFDFFH
(ax)=7 减去 imm=-3
0000 0111 ax
1000 0011 imm
1111 1101 imm补码
0000 0011 -imm补码
0000 0111 +
0000 0011
0000 1010
C0=1 Cn=0 Cn-1=0
Cn异或Cn-1=0 OF=0

5
值eax+ebx*4=0000 00B0H
乘以-16
11*16=176
等于-2816 十进制
存入eax寄存器 即`R[eax]`
1000 1011 0000 0000 原码
1111 0101 0000 0000 补码
FFFF F500H

6
804846cH在取指令以后会自增2
变成
804846eH
jle满足条件需要跳转,所以加上偏移量0d
804846EH +
0DH
804847BH

## 4.4.4

1A 2B 3D 4C 5A

## 5.1.4

1C 2D 3A 4B 5B !6B 7C 8A 9B !10D/C !11A/B !12D/B 13C 14C !15D/B !16C/D 17D !18A/C !19D/C 20B 21C 22A 23B !24A/B 25B !26D/B

24
主存容量 4GB=2^2*2^30字节B
PC和主存字数相关
2^32字(按字节编址),32位
至少:存储字长和指令字长是32位,即4字
按字边界对齐存放,则代表PC是4整数倍
所以PC位数可以减少2位

26
主存容量 4GB=2^2*2^30字节B
PC和主存字数相关
2^32字,32位
IR和指令字长相关,32位
至少:存储字长和指令字长是32位,即4字
按字边界对齐存放,则代表PC是4整数倍
所以PC位数可以减少2位,30位
