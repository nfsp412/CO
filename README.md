# 计算机组成原理

The principles of computer composition

## 计算机系统概述

### 计算机系统层次结构

#### 计算机硬件

冯诺依曼机

* 五大部件
* 指令和数据
* 二进制
* 指令=操作码+地址码
* 存储程序
* 运算器为中心

现代计算机

* 以存储器为中心
* CPU=运算器+控制器
* 主机=CPU+主存储器(内存?)
* I/O设备:输入设备,输出设备,辅存储器(磁盘?)

主存储器的部件

* 存储体:存储单元一般是8位的整数倍;存储元存1位;存储字长代表存储单元的代码的位数
* MAR:存储地址寄存器;代表存储单元的个数,$4位=2^4个存储单元$
* MDR:存储数据寄存器;代表存储字长

澄清

* 100Mbps:ps代表per second每秒钟;100M代表100M个;b代表比特位
* 12.5MB/s:12.5M代表12.5M个;B代表字节
* 区分B(字节)和b(比特位bit)
* 1B=8bit

运算器的部件

* ACC:累加器;存放操作数或运算结果
* MQ:乘商寄存器;存放操作数或运算结果(乘除法时)
* X:通用操作数寄存器;存放操作数
* ALU:算数逻辑单元;实现算数运算和逻辑运算
* 标志寄存器,这个在图上有专门画出

控制器的部件

* CU:控制单元;分析指令,给出控制信号
* IR:指令寄存器;存放当前执行指令
* PC:程序计数器;存放下一条执行指令;自动加1

指令三步骤

* 取指
  * (PC) -> MAR
  * M(MAR) -> MDR
  * (MDR) -> IR
  * (PC)+1 -> PC
* 分析
  * OP(IR) -> CU
* 执行
* 题目中系列机的指令系统向后兼容,指的是时间上的向后兼容,即老机器开发的程序在新机器也能兼容使用

存取速度对比

* 寄存器>Cache>内存

相联存储器

* 既可以按照地址寻址,又可以按照内容寻址,详见第三章

#### 计算机软件

翻译程序

* 编译器:可以翻译成汇编语言或者机器级目标代码文件
* 汇编器
* 解释器
* 机器级目标代码文件,可以理解为C语言的.o文件

语言级别

* 高级语言
* 汇编语言
* 机器语言

指令集体系结构

* ISA;软件和硬件之间的界限,即一台计算机应该能够支持哪些指令

#### 计算机系统的层次结构

以编程人员视角来看层次结构

* 虚拟机器 M4:高级语言;
* 虚拟机器 M3:汇编语言;一条汇编语言指令和机器语言指令是一一对应的
* 虚拟机器 M2:操作系统;向上提供系统调用指令
* 传统机器 M1:机器语言;执行二进制指令;一条二进制指令可能包含多个微指令步骤
* 微程序机器 M0:微指令系统;硬件直接执行微指令
* 重点关注M0和M1;具体指令的实现;对程序员透明(看不见)

#### 计算机系统工作原理

C语言源程序流程

* .c的源代码文件
* 经过预处理器,例如宏定义常量替换,得到.i源文件
* 经过编译器,得到.s汇编文件
* 经过汇编器,得到目标模块.o
* 经过链接器,链接其他.o目标模块,得到可执行文件.exe
